tippy("#helpFirstStaff",{content:"Manque d'anticipation des arriv\xE9es de nouveaux consultants. Cons\xE9quence : une latence sur le premier staffing des nouveaux embauch\xE9s."}),tippy("#helpNewStaffing",{content:"Manque d'anticipation des futures disponibilit\xE9s. Cons\xE9quence : un d\xE9lai d'inactivit\xE9 entre les missions."}),tippy("#helpLeanStart",{content:"Manque de fiabilit\xE9 sur les d\xE9marrages de missions. Cons\xE9quence : un d\xE9calage des plannings avec des retards non productifs."}),tippy("#helpLeanBack",{content:"Manque de visibilit\xE9 sur les fins et renouvellements de missions. Cons\xE9quence : un d\xE9lai de prise en compte de la disponibilit\xE9 des consultants."}),tippy("#helpShadowStaffing",{content:"Manque de contr\xF4le de la fraude. Cons\xE9quence : une inactivit\xE9 cach\xE9e, r\xE9v\xE9l\xE9e a posteriori."}),tippy("#helpPlanDeCharge",{content:"Mat\xE9rialisation d\xE9taill\xE9e de l'occupation des consultants. Survolez les jours pour avoir leur explication."});const firebaseConfig={apiKey:"AIzaSyAdJZlbzyA6ssJu5YyvftEupGIKlAQSPAI",authDomain:"simulator-299fa.firebaseapp.com",databaseURL:"https://simulator-299fa.firebaseio.com",projectId:"simulator-299fa",storageBucket:"simulator-299fa.appspot.com",messagingSenderId:"966834241777",appId:"1:966834241777:web:082d59532e859be085e950",measurementId:"G-NJ3L8JQKES"};firebase.initializeApp(firebaseConfig);var name,email,photoUrl,uid,emailVerified,connected=!0,user=firebase.auth().currentUser;firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);var ui=new firebaseui.auth.AuthUI(firebase.auth()),actionCodeSettings={url:"https://simulator.whoz.io/"};function loggued(){document.getElementById("esn-main").style.display="block",hideDescription(),connected=!0,user=firebase.auth().currentUser,null!=user&&(name=user.displayName,email=user.email,photoUrl=user.photoURL,emailVerified=user.emailVerified,uid=user.uid),db.collection("whoz"+dev).doc(email).collection("login").add({email:email,loginId,loginDate}),db.collection("events"+dev).add({type:"login",email:email,loginId,loginDate}),saveSimulation1(!0)}var uiConfig={callbacks:{signInSuccessWithAuthResult:function(){return loggued(),!1},uiShown:function(){document.getElementById("loader").style.display="none"}},signInFlow:"popup",signInSuccessUrl:"",signInOptions:[{provider:firebase.auth.EmailAuthProvider.PROVIDER_ID,signInMethod:firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD},firebase.auth.GoogleAuthProvider.PROVIDER_ID],tosUrl:"<your-tos-url>",privacyPolicyUrl:"<your-privacy-policy-url>"},dev="localhost"===window.location.hostname?"dev":"",variableTitleList=[{name:"nbDays",type:"number",initialValue:218,optim:!1},{name:"nbConsultant",type:"number",initialValue:75,optim:!1},{name:"TJM",type:"number",initialValue:550,optim:!1},{name:"margin",type:"percent",initialValue:.22,optim:!1},{name:"ratioHires",type:"percent",initialValue:.15,optim:!1},{name:"ratioLeavers",type:"percent",initialValue:.1,optim:!1},{name:"avgTaskDays",type:"number",initialValue:100,optim:!1},{name:"ratioTaskRenewNum",type:"number",initialValue:2,optim:!1},{name:"ratioTaskRenewDenum",type:"number",initialValue:3,optim:!1},{name:"ratioTaskRenewDuration",type:"percent",initialValue:.5,optim:!1},{name:"avgDaysFirstStaffing",type:"number",initialValue:20,optim:!0,limit:5,limitType:"min"},{name:"taskDelay",type:"number",initialValue:30,optim:!0,limit:5,limitType:"min"},{name:"beginDelayed",type:"number",initialValue:7,optim:!0,limit:2,limitType:"min"},{name:"ratioBeginDelayed",type:"number",initialValue:9,optim:!0,limit:20,limitType:"max"},{name:"endBefore",type:"number",initialValue:10,optim:!0,limit:5,limitType:"min"},{name:"ratioEndBefore",type:"number",initialValue:19,optim:!0,limit:40,limitType:"max"},{name:"ratioShadowStaffing",type:"number",initialValue:30,optim:!0,limit:50,limitType:"max"},{name:"shadowStaffingDuration",type:"number",initialValue:20,optim:!0,limit:0,limitType:"min"}];const queryString=window.location.search,urlParams=new URLSearchParams(queryString);var eventId=urlParams.get("eventId");firebase.auth().onAuthStateChanged(a=>{a?(console.log("loggued"),document.getElementById("loader").style.display="none",loggued()):(console.log("not loggued"),ui.start("#firebaseui-auth-container",uiConfig))});var defaultDatabase=firebase.database(),db=firebase.firestore(),loginId=+new Date,loginDate=new Date;if(db.collection("view"+dev).add({loginId,loginDate}),eventId){var doc,docRef=db.collection("events"+dev).doc(eventId);docRef.get().then(function(a){a.exists?(a=a.data(),document.getElementById("defaultSimulationButton").style.display="none",document.getElementById("defaultResultButton").style.display="none",document.getElementById("defaultCompareButton").style.display="none",document.getElementById("simulationSentButton").style.display="block",document.getElementById("sharedKPIsTip").style.display="block",document.getElementById("sharedLeviersTip").style.display="block",init("",a.reference.variables),saveSimulation1(!0)):console.log("No such document!")}).catch(function(a){console.log("Error getting document:",a)})}else document.getElementById("defaultKPIsTip").style.display="block",document.getElementById("defaultLeviersTip").style.display="block",init("");function init(a,b,c){for(const g in console.log(c),variableTitleList){var d=variableTitleList[g].name,e=variableTitleList[g].type,f=b?b[d]:variableTitleList[g].initialValue;document.getElementById(a+d).value="percent"===e?Math.round(100*(100*f))/100:f}}var nbDays,nbConsultant,TJM,margin,ratioHires,ratioLeavers,avgDaysFirstStaffing,avgTaskDays,taskDelay,ratioTaskRenewNum,ratioTaskRenewDenum,ratioTaskRenewDuration,ratioBeginDelayed,beginDelayed,ratioEndBefore,endBefore,ratioShadowStaffing,shadowStaffingDuration,nbUA,UAPrice,price;function getVariables(a){return nbConsultant=+document.getElementById(a+"nbConsultant").value,nbDays=+document.getElementById(a+"nbDays").value,TJM=+document.getElementById(a+"TJM").value,ratioHires=+document.getElementById(a+"ratioHires").value/100,ratioLeavers=+document.getElementById(a+"ratioLeavers").value/100,avgTaskDays=+document.getElementById(a+"avgTaskDays").value,avgDaysFirstStaffing=+document.getElementById(a+"avgDaysFirstStaffing").value,taskDelay=+document.getElementById(a+"taskDelay").value,margin=+document.getElementById(a+"margin").value/100,ratioTaskRenewNum=+document.getElementById(a+"ratioTaskRenewNum").value,ratioTaskRenewDenum=+document.getElementById(a+"ratioTaskRenewDenum").value,ratioTaskRenewDuration=+document.getElementById(a+"ratioTaskRenewDuration").value/100,ratioShadowStaffing=+document.getElementById(a+"ratioShadowStaffing").value,shadowStaffingDuration=+document.getElementById(a+"shadowStaffingDuration").value,beginDelayed=+document.getElementById(a+"beginDelayed").value,ratioBeginDelayed=+document.getElementById(a+"ratioBeginDelayed").value,endBefore=+document.getElementById(a+"endBefore").value,ratioEndBefore=+document.getElementById(a+"ratioEndBefore").value,nbUA=+nbConsultant/10,UAPrice=1440*(nbDays/218),price=nbUA*UAPrice,{nbConsultant,nbDays,TJM,ratioHires,ratioLeavers,avgTaskDays,avgDaysFirstStaffing,taskDelay,margin,ratioTaskRenewNum,ratioTaskRenewDenum,ratioTaskRenewDuration,beginDelayed,ratioBeginDelayed,endBefore,ratioEndBefore,ratioShadowStaffing,shadowStaffingDuration,nbUA,UAPrice,price}}function calculateTaskDays(a){var b;return b=1>=a%10&&4>=a%10?avgTaskDays:5==a%10||7==a%10?Math.floor(.8*avgTaskDays):6==a%10||8==a%10?Math.floor(1.2*avgTaskDays):9==a%10?Math.floor(1.5*avgTaskDays):Math.floor(.5*avgTaskDays),tempCurrentTaskDuration=a%ratioTaskRenewDenum>ratioTaskRenewNum-1?b:Math.floor((1+ratioTaskRenewDuration)*b),tempCurrentTaskDuration}function simulate(a){var b=getVariables(a||""),c=[],d=Math.floor(ratioHires*nbConsultant),e=Math.floor(ratioLeavers*nbConsultant),f=Math.floor(nbDays/d),g=Math.floor(nbDays/e),h=+nbConsultant+ +d,i=0,j=1,k=0,l=0,m=1,n=0,o=0;for(let b=0;b<h;b++){var p,q;d--;var r=0<=d?f*d:-1,s=nbDays+1;if(h-b<e){e--;var s=0<e?g*e:nbDays}i!==j&&(q=calculateTaskDays(j),i=j),l=b%q,n=l<=beginDelayed?l:beginDelayed;for(let a=1;a<=nbDays;a++){var t,u,q;i!==j&&(q=calculateTaskDays(j),i=j),a<r||a>s?(t=0,u="NOT WORKING"):0<=r&&a>=r&&a-r<avgDaysFirstStaffing?(t=2,u="ON BOARDING"):1<m&&k<taskDelay&&0==l?(k++,t=2,u="DELAY BETWEEN TASKS"):o<shadowStaffingDuration&&0==j%ratioShadowStaffing?(o++,t=2,u="SHADOW STAFFING"):n<beginDelayed&&0==j%ratioBeginDelayed?(n++,t=2,u="START DELAYED"):0==j%ratioEndBefore&&q-l<=endBefore?(t=2,u="END BEFORE",l++):(t=1,u="BILLABLE",l++),c.push({date:a,start:r,end:s,type:u,consultant:b,occupation:t,text:"Task count: "+j+"\nConsultant task count"+m+"\nTask workload: "+l}),l===q&&(j++,m++,k=0,n=0,o=0,l=0)}j++,k=0,n=0,o=0,l=0,m=1,p=b}var v=crossfilter(c),w=v.dimension(function(a){return[+a.date,a.consultant,a]}),x=w.group().reduceSum(function(a){return+a.occupation}),y=13*nbDays,z=13*h,A=new dc.HeatMap("#esnHeatmap");A.width(y).height(z).transitionDuration(0).dimension(w).group(x).keyAccessor(function(a){return+a.key[0]}).valueAccessor(function(a){return+a.key[1]}).rowsLabel(function(a){return"Consultant "+(h-a)}).colsLabel(function(a){return 1==a||a==nbDays||0==a%10?a:""}).title(function(a){return"Date:   "+a.key[0]+"\nConsultant:  "+a.key[1]+"\nType : "+a.key[2].type+"\noccupation: "+a.value+"\nTask : "+a.key[2].text}).colorAccessor(a=>a.key[2].type).colors(d3.scaleOrdinal().domain(["NOT WORKING","ON BOARDING","DELAY BETWEEN TASKS","SHADOW STAFFING","START DELAYED","END BEFORE","BILLABLE"]).range(["#cfcfcf","#935116","#FFBE3E","#c51b8a","#117A65","#CB4335","#0048B5"])),A.margins({top:20,right:0,bottom:20,left:20}),A.on("renderlet",function(a){var b=a.selectAll("rect"),c=1e4,d=1e4;for(let e of b)e.y.baseVal.value<c&&(c=e.y.baseVal.value),e.x.baseVal.value<d&&(d=e.x.baseVal.value);a.selectAll("g.cols.axis > text").attr("y",c-14),a.select("g.heatmap").attr("transform","translate(70, 15)"),a.select("svg").attr("width",y+100).attr("height",z+100)}),A.render(),kpiDim=v.dimension(function(){return 1});var B=kpiDim.groupAll().reduce((a,b)=>(a.numTACE+=1===b.occupation?1:0,a.denumTACE+=1<=b.occupation?1:0,a.interco+=2===b.occupation?1:0,a.missionDelay+="DELAY BETWEEN TASKS"===b.type&&2===b.occupation?1:0,a.onBoarding+="ON BOARDING"===b.type&&2===b.occupation?1:0,a.shadowStaffing+="SHADOW STAFFING"===b.type&&2===b.occupation?1:0,a.leanStart+="START DELAYED"===b.type&&2===b.occupation?1:0,a.leanBack+="END BEFORE"===b.type&&2===b.occupation?1:0,a.TACE=0<a.denumTACE?a.numTACE/a.denumTACE:0,a.CA=a.numTACE*TJM,a.intercoCA=a.interco*TJM,a.intercoCost=a.interco*TJM*(1-margin),a.missionDelayCA=a.missionDelay*TJM,a.missionDelayCost=a.missionDelay*TJM*(1-margin),a.onBoardingCA=a.onBoarding*TJM,a.onBoardingCost=a.onBoarding*TJM*(1-margin),a.shadowStaffingCA=a.shadowStaffing*TJM,a.shadowStaffingCost=a.shadowStaffing*TJM*(1-margin),a.leanStartCA=a.leanStart*TJM,a.leanStartCost=a.leanStart*TJM*(1-margin),a.leanBackCA=a.leanBack*TJM,a.leanBackCost=a.leanBack*TJM*(1-margin),a.totalCost=a.denumTACE*TJM*(1-margin),a.totalTaskCount=j,a.initialConsultant=nbConsultant,a.hires=Math.floor(ratioHires*nbConsultant),a.leavers=Math.floor(ratioLeavers*nbConsultant),a),(a,b)=>(a.numTACE-=1===b.occupation?1:0,a.denumTACE-=1<=b.occupation?1:0,a.interco-=2===b.occupation?1:0,a.missionDelay-="DELAY BETWEEN TASKS"===b.type&&2===b.occupation?1:0,a.onBoarding-="ON BOARDING"===b.type&&2===b.occupation?1:0,a.shadowStaffing-="SHADOW STAFFING"===b.type&&2===b.occupation?1:0,a.leanStart-="START DELAYED"===b.type&&2===b.occupation?1:0,a.leanBack-="END BEFORE"===b.type&&2===b.occupation?1:0,a.TACE=0<a.denumTACE?a.numTACE/a.denumTACE:0,a.CA=a.numTACE*TJM,a.intercoCA=a.interco*TJM,a.intercoCost=a.interco*TJM*(1-margin),a.missionDelayCA=a.missionDelay*TJM,a.missionDelayCost=a.missionDelay*TJM*(1-margin),a.onBoardingCA=a.onBoarding*TJM,a.onBoardingCost=a.onBoarding*TJM*(1-margin),a.shadowStaffingCA=a.shadowStaffing*TJM,a.shadowStaffingCost=a.shadowStaffing*TJM*(1-margin),a.leanStartCA=a.leanStart*TJM,a.leanStartCost=a.leanStart*TJM*(1-margin),a.leanBackCA=a.leanBack*TJM,a.leanBackCost=a.leanBack*TJM*(1-margin),a.totalCost=a.denumTACE*TJM*(1-margin),a.totalTaskCount=j,a.initialConsultant=nbConsultant,a.hires=Math.floor(ratioHires*nbConsultant),a.leavers=Math.floor(ratioLeavers*nbConsultant),a),()=>({numTACE:0,denumTACE:0,TACE:0,interco:0,onBoarding:0,leanStart:0,leanBack:0,CA:0,intercoCA:0,intercoCost:0,missionDelay:0,missionDelayCA:0,missionDelayCost:0,onBoardingCA:0,onBoardingCost:0,leanStartCA:0,leanStartCost:0,leanBackCA:0,leanBackCost:0,shadowStaffing:0,shadowStaffingCA:0,shadowStaffingCost:0,totalCost:0,totalTaskCount:0,initialConsultant:0,hires:0,leavers:0})),C=new dc.NumberDisplay("#esnNumberTACE").formatNumber(d3.format(".2%")).valueAccessor(a=>a.TACE).group(B).render(),D=new dc.NumberDisplay("#esnNumberBillable").formatNumber(d3.format(",.0f")).valueAccessor(a=>a.numTACE).group(B).render(),E=new dc.NumberDisplay("#esnCA").formatNumber(d3.format(".3s")).valueAccessor(a=>a.CA).group(B).render(),E=new dc.NumberDisplay("#esnCAbyConsultant").formatNumber(d3.format(".3s")).valueAccessor(a=>a.CA/(a.initialConsultant+a.hires)).group(B).render(),F=new dc.NumberDisplay("#esnInterco").formatNumber(d3.format(",.0f")).valueAccessor(a=>a.interco).group(B).render(),G=new dc.NumberDisplay("#esnIntercoCA").formatNumber(d3.format(".3s")).valueAccessor(a=>a.intercoCA).group(B).render(),H=new dc.NumberDisplay("#esnIntercoCost").formatNumber(d3.format(".3s")).valueAccessor(a=>a.intercoCost).group(B).render(),I=new dc.NumberDisplay("#esnMissionDelay").formatNumber(d3.format(",.0f")).valueAccessor(a=>a.missionDelay).group(B).render(),J=new dc.NumberDisplay("#esnMissionDelayCA").formatNumber(d3.format(".3s")).valueAccessor(a=>a.missionDelayCA).group(B).render(),K=new dc.NumberDisplay("#esnMissionDelayCost").formatNumber(d3.format(".3s")).valueAccessor(a=>a.missionDelayCost).group(B).render(),L=new dc.NumberDisplay("#esnOnBoarding").formatNumber(d3.format(",.0f")).valueAccessor(a=>a.onBoarding).group(B).render(),M=new dc.NumberDisplay("#esnOnBoardingCA").formatNumber(d3.format(".3s")).valueAccessor(a=>a.onBoardingCA).group(B).render(),N=new dc.NumberDisplay("#esnOnBoardingCost").formatNumber(d3.format(".3s")).valueAccessor(a=>a.onBoardingCost).group(B).render(),O=new dc.NumberDisplay("#esnShadowStaffing").formatNumber(d3.format(",.0f")).valueAccessor(a=>a.shadowStaffing).group(B).render(),P=new dc.NumberDisplay("#esnShadowStaffingCA").formatNumber(d3.format(".3s")).valueAccessor(a=>a.shadowStaffingCA).group(B).render(),Q=new dc.NumberDisplay("#esnShadowStaffingCost").formatNumber(d3.format(".3s")).valueAccessor(a=>a.shadowStaffingCost).group(B).render(),R=new dc.NumberDisplay("#esnLeanStart").formatNumber(d3.format(",.0f")).valueAccessor(a=>a.leanStart).group(B).render(),P=new dc.NumberDisplay("#esnLeanStartCA").formatNumber(d3.format(".3s")).valueAccessor(a=>a.leanStartCA).group(B).render(),Q=new dc.NumberDisplay("#esnLeanStartCost").formatNumber(d3.format(".3s")).valueAccessor(a=>a.leanStartCost).group(B).render(),S=new dc.NumberDisplay("#esnLeanBack").formatNumber(d3.format(",.0f")).valueAccessor(a=>a.leanBack).group(B).render(),T=new dc.NumberDisplay("#esnLeanBackCA").formatNumber(d3.format(".3s")).valueAccessor(a=>a.leanBackCA).group(B).render(),U=new dc.NumberDisplay("#esnLeanBackCost").formatNumber(d3.format(".3s")).valueAccessor(a=>a.leanBackCost).group(B).render(),V=new dc.NumberDisplay("#esnWhozCost").formatNumber(d3.format(".3s")).valueAccessor(()=>price).group(B).render(),U=new dc.NumberDisplay("#esnTotalCost").formatNumber(d3.format(".3s")).valueAccessor(a=>a.totalCost).group(B).render(),W=new dc.NumberDisplay("#esnGlobalMargin").formatNumber(d3.format(".2%")).valueAccessor(a=>(a.CA-a.totalCost)/a.CA).group(B).render(),X=new dc.NumberDisplay("#esnConsultantCount").formatNumber(d3.format(".0f")).valueAccessor(a=>a.initialConsultant-a.leavers+a.hires).group(B).render(),Y=new dc.NumberDisplay("#esnMissionCount").formatNumber(d3.format(".3s")).valueAccessor(a=>a.totalTaskCount).group(B).render();return{result:B.value(),variables:b}}var simulation1,simulation2;function saveSimulation1(a){a||(document.getElementById("defaultKPIsTip").style.display="none",document.getElementById("defaultLeviersTip").style.display="none"),connected&&(simulation1=simulate(),document.getElementById("simulationType").textContent="Les KPIs du sc\xE9nario de R\xE9f\xE9rence (R)",simulation1&&simulation2?compare("simulation1"):(db.collection("whoz"+dev).doc(user?.email||dev).collection("simulate").add({email:user?.email||dev,loginId,loginDate,createdAt:firebase.firestore.FieldValue.serverTimestamp(),reference:simulation1}),db.collection("events"+dev).add({type:"simulation1",email:user?.email||dev,loginId,loginDate,createdAt:firebase.firestore.FieldValue.serverTimestamp(),reference:simulation1})))}function optim(a,b){for(const c in variableTitleList){var d=variableTitleList[c].optim,e=variableTitleList[c].name,f=variableTitleList[c].limitType,g=variableTitleList[c].limit,h=variableTitleList[c].type,i=simulation1.variables[e];if(!(!0===d))document.getElementById("c"+e).value="percent"===h?100*i:i;else if("min"===f){var j=Math.max(Math.min(i*(1-a),i),g);document.getElementById("c"+e).value=Math.round("percent"===h?100*j:j)}else{var j=Math.min(Math.max(i*(1+a),i),g);document.getElementById("c"+e).value=Math.round("percent"===h?100*j:j)}}saveSimulation2(b)}function optimFast(){optim(.3,"fast")}function optimHard(){optim(.5,"strong")}function saveSimulation2(a){document.getElementById("sharedKPIsTip").style.display="none",document.getElementById("sharedLeviersTip").style.display="none","simulationSentButton"!=a&&(document.getElementById("defaultResultButton").style.display="block"),connected&&(simulation2=simulate("c"),document.getElementById("simulationType").textContent="Les KPIs du sc\xE9nario Cible (C)",simulation1&&simulation2&&compare(a||"compare"))}function compare(a){for(const e in console.log(simulation1,simulation2),variableTitleList){var b=variableTitleList[e].name,c=simulation1.variables[b],d=simulation2.variables[b];c==d?(document.getElementById(b+"Hint").textContent="",document.getElementById("c"+b+"Hint").textContent=""):(document.getElementById(b+"Hint").textContent="R="+c+" C="+d,document.getElementById("c"+b+"Hint").textContent="R="+c+" C="+d)}const e=document.querySelector(".resultCompare");e.classList.replace("hideCompare","showCompare");var f=crossfilter({id:1}),g=f.dimension(function(a){return a.id}),h=g.groupAll().reduceCount(),i=new dc.NumberDisplay("#compareCA").formatNumber(d3.format("+.3s")).valueAccessor(()=>simulation2.result.CA-simulation1.result.CA).group(h).render(),j=new dc.NumberDisplay("#compareMission").formatNumber(d3.format("+.0f")).valueAccessor(()=>simulation2.result.totalTaskCount-simulation1.result.totalTaskCount).group(h).render(),k=new dc.NumberDisplay("#compareMargin").formatNumber(d3.format("+.2f")).valueAccessor(()=>100*((simulation2.result.CA-simulation2.result.totalCost)/simulation2.result.CA-(simulation1.result.CA-simulation1.result.totalCost)/simulation1.result.CA)).group(h).render(),l=new dc.NumberDisplay("#compareIntercoCost").formatNumber(d3.format("+.3s")).valueAccessor(()=>simulation2.result.intercoCost-simulation1.result.intercoCost).group(h).render(),m=new dc.NumberDisplay("#compareBillable").formatNumber(d3.format("+.3s")).valueAccessor(()=>simulation2.result.numTACE-simulation1.result.numTACE).group(h).render(),n=new dc.NumberDisplay("#compareCAByConsultant").formatNumber(d3.format("+.3s")).valueAccessor(()=>simulation2.result.CA/(simulation2.result.initialConsultant+simulation2.result.hires)-simulation1.result.CA/(simulation1.result.initialConsultant+simulation1.result.hires)).group(h).render(),k=new dc.NumberDisplay("#compareTACE").formatNumber(d3.format("+.2f")).valueAccessor(()=>100*(simulation2.result.numTACE/simulation2.result.denumTACE-simulation1.result.numTACE/simulation1.result.denumTACE)).group(h).render();db.collection("whoz"+dev).doc(user?.email||dev).collection("compare").add({email:user?.email||dev,loginId,loginDate,createdAt:firebase.firestore.FieldValue.serverTimestamp(),reference:simulation1,target:simulation2,fromAction:a}),db.collection("events"+dev).add({type:"compare",fromAction:a,email:user?.email||dev,loginId,loginDate,createdAt:firebase.firestore.FieldValue.serverTimestamp(),reference:simulation1,target:simulation2}).then(b=>{"simulationSentButton"!=a&&(eventId=b.id,url=window.location.href+"?eventId="+eventId,document.getElementById("share").style.display="flex",document.getElementById("urlToShare").innerHTML=window.location.href.split("?")[0]+"?eventId="+eventId)})}function launchCompareFrom(){docRef.get().then(function(a){a.exists&&(a=a.data(),document.getElementById("tab-2").click(),init("c",a.target.variables),document.getElementById("defaultSimulationButton").style.display="block",document.getElementById("defaultCompareButton").style.display="block",document.getElementById("simulationSentButton").style.display="none",saveSimulation2("simulationSentButton"))})}function copyToClipboard(a){var b=document.createElement("input");b.setAttribute("value",document.getElementById(a).innerHTML),document.body.appendChild(b),b.select(),document.execCommand("copy"),document.body.removeChild(b)}function hideDescription(){document.getElementById("whozup-description").style.display="none",document.getElementById("showDescription").style.display="block",document.getElementById("hideDescription").style.display="none"}function showDescription(){document.getElementById("whozup-description").style.display="block",document.getElementById("showDescription").style.display="none",document.getElementById("hideDescription").style.display="block"}
